{%- import "icons.j2" as icons -%}
{% extends "layout/authed.j2" %}
{% block title %}{{title}}{% endblock %}
{% block content %}
<form id="content">

  <header class="header-bg top-0 z-40 flex h-16 shrink-0 items-center gap-x-6 border-b border-white/10 px-4 shadow-sm sm:px-6 lg:px-8">
    <h1 class="text-base font-semibold leading-7 text-xl text-white">
      {% call icons::server("inline w-8 h-8") %}
      <span class="align-middle pl-2">
        {{instance.alias.as_deref().unwrap_or(instance.uuid.to_string().as_ref())}}
      </span>
    </h1>
    <div class="flex flex-1 items-center justify-end gap-x-6 mb-10 my-10">
      {% if instance.state == "running" %}
        <button
          data-hx-post="/instances/{{instance.uuid}}/stop"
          data-hx-target="#main"
          data-hx-select="#content"
          data-hx-confirm="Are you sure you want to stop this instance?"
          data-hx-indicator="#instance-stop-indicator"
          data-hx-disabled-elt="this"
          title="Stop this instance"
          type="submit"
          class="btn btn-amber">
          <span class="htmx-indicator" id="instance-stop-indicator">
            <span class="loader-icon">
              {% call icons::loading("h-6 w-6 inline pr-1") %}
            </span>
            <span class="default-icon">
              {% call icons::stop_circle("h-6 w-6 inline") %}
            </span>
          </span>
          <span class="align-middle">Stop</span>
        </button>
      {% else %}
        <button
          data-hx-post="/instances/{{instance.uuid}}/start"
          data-hx-target="#main"
          data-hx-select="#content"
          data-hx-indicator="#instance-start-indicator"
          data-hx-disabled-elt="this"
          title="Start this instance"
          type="submit"
          class="btn btn-primary">
          <span class="htmx-indicator" id="instance-start-indicator">
            <span class="loader-icon">
              {% call icons::loading("h-6 w-6 inline pr-1") %}
            </span>
            <span class="default-icon">
              {% call icons::play_circle("h-6 w-6 inline") %}
            </span>
          </span>
          <span class="align-middle">Start</span>
        </button>
      {% endif %}
      <button
        data-hx-delete="/instances/{{instance.uuid}}"
        data-hx-target="#main"
        data-hx-select="#content"
        data-hx-confirm="Are you sure you want to delete this instance?"
        data-hx-indicator="#instance-delete-indicator"
        data-hx-disabled-elt="this"
        title="Delete this instance"
        type="submit"
        class="btn btn-warn">
        <span class="htmx-indicator" id="instance-delete-indicator">
          <span class="loader-icon">
            {% call icons::loading("h-6 w-6 inline pr-1") %}
          </span>
          <span class="default-icon">
            {% call icons::trash("h-6 w-6 inline") %}
          </span>
        </span>
        <span class="align-middle">Delete</span>
      </button>

    </div>
  </header>

  <div class="mx-auto px-8">
    <div class="space-y-12">
      <div class="pb-12">
        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">

          <div class="sm:col-span-4">
            <label for="alias" class="block text-sm font-medium leading-6 text-white">Alias</label>
            <div class="mt-2">
              <div class="flex rounded-md bg-white/5 ring-1 ring-inset ring-white/10 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500">
                <span class="flex select-none items-center pl-3 text-gray-500 sm:text-sm">{{instance.alias.as_deref().unwrap_or("-")}}</span>
                <input type="text" name="alias" id="alias" class="flex-1 border-0 bg-transparent py-1.5 pl-1 text-white focus:ring-0 sm:text-sm sm:leading-6">
              </div>
            </div>
          </div>
        
          <div class="sm:col-span-4">
              <label for="brand" class="block text-sm font-medium leading-6 text-white">Brand</label>
              <div class="mt-2">
                <div class="flex rounded-md bg-white/5 ring-1 ring-inset ring-white/10 focus-within:ring-2 focus-within:ring-inset focus-within:ring-blue-500">
                  <span class="flex select-none items-center pl-3 text-gray-500 sm:text-sm">{{instance.brand}}</span>
                  <input type="text" name="brand" id="brand" class="flex-1 border-0 bg-transparent py-1.5 pl-1 text-white focus:ring-0 sm:text-sm sm:leading-6">
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>
    <div class="mt-6 flex items-center justify-end gap-x-6">
      {{ instance.state }}
    </div>
  </div>
</form>
{% endblock %}